<.header>
  Canidates to Close
</.header>

<.table id="bus_alerts" sticky={true} rows={@alerts_by_route |> Keyword.keys()}>
  <:col :let={route} label="Route Name">
    <%= route %>
  </:col>
  <:col :let={route} label="Median Adherence">
    <%= RouteStats.median_schedule_adherence(@stats_by_route, Atom.to_string(route))
    |> seconds_to_minutes() %>
  </:col>
  <:col :let={route} label="Median Instantaneous Headway (minutes)">
    <%= RouteStats.median_instantaneous_headway(@stats_by_route, Atom.to_string(route))
    |> seconds_to_minutes() %>
  </:col>
  <:col :let={route} label="Route has Cancelled Trip">
    <span :if={Enum.member?(@block_waivered_routes, Atom.to_string(route))}>
      ❌
    </span>
  </:col>
  <:col :let={route} label="Alert Duration (hours)">
    <%= Enum.map(@alerts_by_route[route], &alert_duration(&1)) |> Enum.join(", ") %>
  </:col>
</.table>
